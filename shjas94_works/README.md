# 한사랑개발회 허재섭 T1224 실험 기록

## Stage 3-1 Segmentation

| Date       | Run Name                                         | Model Name | Arguments                                                                                                                                                                                                                                                                                                                                                     | WanDB Link                                                                          | ETC                                                                                                                                                                                                                                                                                                                                                  |
| ---------- | ------------------------------------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2021-04-30 | DeepLabV3_cosinelr                               | DeepLabV3  | batch_size=8, <br>criterion='cross_entropy', <br>lr=5e-05, <br>model='DeepLabV3', <br>num_epochs=10, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=0.0001                                                                                                | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/3l1vdffh?workspace=user-shjas94) | None                                                                                                                                                                                                                                                                                                                                                 |
| 2021-05-01 | DeepLabV3_cosinelr_tmax_10_focal                 | DeepLabV3  | batch_size=8, <br>criterion='cross_entropy', <br>lr=0.0001, <br>model='DeepLabV3', <br>num_epochs=10, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr_tmax_10', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=1e-06                                                                                        | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/2fn31ysp?workspace=user-shjas94) | CosineAnnealingLR tmax : 2 -> 10                                                                                                                                                                                                                                                                                                                     |
| 2021-05-01 | DeepLabV3_cosinelr_tmax_10_focal_gamma_0         | DeepLabV3  | batch_size=4, <br>criterion='focal', <br>lr=0.0001, <br>model='DeepLabV3', <br>num_epochs=10, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr_tmax_10_focal_gamma_0', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=4, <br>weight_decay=1e-06                                                                                  | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/j09kqi0o?workspace=user-shjas94) | WanDB서버 오류로 로그는 7th epoch 까지만 있음                                                                                                                                                                                                                                                                                                        |
| 2021-05-02 | DeepLabV3_cosinelr_tmax_10_backbone_ns           | DeepLabV3  | batch_size=8, <br>criterion='cross_entropy', <br>lr=0.0001, <br>model='DeepLabV3', <br>num_epochs=15, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr_tmax_10', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=1e-06                                                                                        | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/2tymft8i?workspace=user-shjas94) | best LB score                                                                                                                                                                                                                                                                                                                                        |
| 2021-05-03 | DeepLabV3_cosinelr_tmax_10_backbone_ns_cutmix    | DeepLabV3  | batch_size=8, <br>criterion='cross_entropy', <br>cutmix=True, <br>lr=0.0001, <br>model='DeepLabV3', <br>num_epochs=20, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr_tmax_10_backbone_ns_cutmix', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=1e-06                                                    | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/2r1ui7k4?workspace=user-shjas94) | 성능이 좋지는 않음. loss값은 적절하나 mIoU 값이 기대만큼 오르지 않는다.                                                                                                                                                                                                                                                                              |
| 2021-05-03 | DeepLabV3_cosinelr_tmax_10_backbone_ns_added_aug | DeepLabV3  | batch_size=8, <br>criterion='cross_entropy', <br>cutmix=False, <br>lr=0.0001, <br>model='DeepLabV3', <br>num_epochs=20, <br>optimizer='MADGRAD', <br>run_name='DeepLabV3_cosinelr_tmax_10_backbone_ns_added_aug', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=0.0001                                               | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/3rfj384y?workspace=user-shjas94) | augmentation으로 RandomHorizontalFlip(p=0.5) 추가, weight_decay 0.0001으로 변경. lb mIoU : 0.6 달성                                                                                                                                                                                                                                                  |
| 2021-05-04 | multiple_aug_with_multi_loss                     | DeepLabV3  | batch_size=8, criterion1='cross_entropy', criterion2='focal', cutmix=False, lr=0.0001, model='DeepLabV3', multi_loss=True, num_epochs=20, optimizer='MADGRAD', run_name='multiple_aug_with_multi_loss', scheduler='CosineAnnealingLR', seed=42, val_batch_size=8, weight_decay=0.0001                                                                         | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/3pc85tth?workspace=user-shjas94) | 0.5*focal_loss(gamma=0.75) + 0.5*cross_entropy()로 loss 변경, augmentation은 A.HorizontalFlip(p=0.3),A.Rotate(p=0.3, limit=45),A.RandomBrightnessContrast(p=0.3) 추가, lb mIoU : 0.62 달성, cutmix의 경우 성능이 좋지 않고 flip이나 rotate가 성능이 좋은 것을 보면 원본 이미지를 크게 해치지 않는 방식으로 augmentation을 추가하는 것이 좋은 것 같음 |
| 2021-05-05 | label_smoothing_dual_loss_histogram_equalization | DeepLabV3  | batch_size=8, <br>criterion1='cross_entropy', <br>criterion2='focal', <br>cutmix=False, <br>lr=0.0001, <br>model='DeepLabV3', <br>multi_loss=True, <br>num_epochs=25, <br>optimizer='MADGRAD', <br>run_name='label_smoothing_dual_loss_histogram_equalization', scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=0.0001     | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/1lzy9dai?workspace=user-shjas94) | histogram equalization을 전처리로 적용, label smoothing loss와 focal loss 1:1 비율로 혼용하였으나 lb mIoU : 0.61. 오히려 하락함                                                                                                                                                                                                                      |
| 2021-05-05 | backbone_b5ns_label_smoothong_normalization      | DeepLabV3  | batch_size=8, <br>criterion1='cross_entropy', <br>criterion2='focal', <br>cutmix=False, <br>lr=0.0001, <br>model='DeepLabV3', <br>multi_loss=True, <br>num_epochs=25, <br>optimizer='MADGRAD', <br>run_name='label_smoothing_dual_loss_histogram_equalization', <br>scheduler='CosineAnnealingLR', <br>seed=42, <br>val_batch_size=8, <br>weight_decay=0.0001 | [WanDB_link](https://wandb.ai/pstage12/jaesub/runs/13omyyz7?workspace=user-shjas94) | histogram equalization 제거 및 /255. 대신 normalization 적용, dual loss 대신 label smoothing loss 적용, augmentation에 cutout, clache 추가. lb mIoU : 0.6293 달성                                                                                                                                                                                    |
| 2021-05-05 | Ensemble                                         | Ensemble   | None                                                                                                                                                                                                                                                                                                                                                          | None                                                                                | 팀원들과의 앙상블. lb mIoU : 0.6388 달성                                                                                                                                                                                                                                                                                                             |
